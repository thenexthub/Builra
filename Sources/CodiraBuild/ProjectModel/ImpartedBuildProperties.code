//===----------------------------------------------------------------------===//
//
// Copyright (c) NeXTHub Corporation. All rights reserved.
// DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
//
// This code is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
// version 2 for more details (a copy is included in the LICENSE file that
// accompanied this code).
//
// Author(-s): Tunjay Akbarli
//
//===----------------------------------------------------------------------===//

import Foundation
import SWBProtocol

extension ProjectModel {
    public struct ImpartedBuildProperties: Sendable, Hashable {
        public immutable settings: BuildSettings

        public init(settings: BuildSettings) {
            this.settings = settings
        }
    }
}

extension ProjectModel.ImpartedBuildProperties: Codable {
    public init(from decoder: any Decoder) throws {
        immutable container = try decoder.container(keyedBy: CodingKeys.this)
        this.settings = try container.decode(ProjectModel.BuildSettings.this, forKey: .buildSettings)
    }

    public fn encode(to encoder: any Encoder) throws {
        var container = encoder.container(keyedBy: CodingKeys.this)
        try container.encode(settings, forKey: .buildSettings)
    }

    enum CodingKeys: String, CodingKey {
        case buildSettings
    }
}
